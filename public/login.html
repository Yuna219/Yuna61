<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>iCrowdTask SignIn</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
          id="bootstrap-css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://apis.google.com/js/api:client.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <style>
        .css-12dykto {
            display: flex;
            flex-direction: row;
            background-color: rgb(66, 133, 244);
            width: 252px;
            box-sizing: content-box;
            cursor: pointer;
            padding: 0px 2px 0px 0px;
            border-width: 1px;
            border-style: solid;
            border-color: rgb(66, 133, 244);
            border-image: initial;
            border-radius: 2px;
        }

        svg {
            width: 40px;
            height: 40px;
        }

        .css-vhl90e {
            -webkit-box-flex: 1;
            flex-grow: 1;
            height: 40px;
        }

        .css-f04y3h {
            color: rgb(255, 255, 255);
            font-size: 14px;
            font-weight: bold;
            font-family: Akzidenz;
            line-height: 40px;
            height: 40px;
        }
    </style>
</head>
<body>
<form action="/login" method="POST" id="formid" onsubmit="Submit(event)">
    <div class="container">
        <hr>
        <div class="row">
            <aside class="col-sm-4 card" style="margin: auto;padding:20px 40px  50px 40px">
                <h4 class="card-title mb-4 mt-1">iCrowdTask Login</h4>
                <div class="card">
                    <article class="card-body">
                        <a href="./registration.html"
                           style="border: 1px solid;float: right;padding: 5px 10px;text-decoration: none">Sign up</a>
                        <h4 class="card-title mb-4 mt-1">Sign in</h4>
                        <form>
                            <div>
                                <label>Your email</label>
                                <input style="border-radius:15px;" name="email" class="form-control" type="email"
                                       id="email" required>
                            </div> <!-- form-group// -->

                            <div class="form-group">
                                <a class="float-right" href="/repassword">Forgot?</a>
                                <label>Your password</label>
                                <input style="border-radius:15px;" name="password" class="form-control" type="password"
                                       id="password" required>
                            </div> <!-- form-group// -->

                            <div class="form-group">
                                <div class="checkbox">
                                    <label> <input type="checkbox"> Save password </label>
                                </div> <!-- checkbox .// -->
                            </div> <!-- form-group// -->

                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block"> Login</button>
                            </div> <!-- form-group// -->
                            <button type="button" onclick="google_login()" class="css-12dykto ehzgfgn0">
                                <svg width="40" height="40">
                                    <g id="Google-Button" stroke="none" stroke-width="1" fill="none"
                                       fill-rule="evenodd">
                                        <rect x="0" y="0" width="40" height="40" rx="2"
                                              style="fill: rgb(255, 255, 255);"></rect>
                                        <g id="logo_googleg_48dp" transform="translate(10.5, 10.5) scale(1.1)">
                                            <path d="M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727  17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z"
                                                  id="Shape" fill="#4285F4"></path>
                                            <path d="M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727  3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182  C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z"
                                                  id="Shape" fill="#34A853"></path>
                                            <path d="M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9  C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182  L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727  0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z"
                                                  id="Shape" fill="#FBBC05"></path>
                                            <path d="M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455  L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0  2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727  6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z"
                                                  id="Shape" fill="#EA4335"></path>
                                            <path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z" id="Shape"></path>
                                        </g>
                                    </g>
                                </svg>
                                <div class="css-vhl90e ehzgfgn1">
                                    <div class="css-f04y3h ehzgfgn2">Log in with Google</div>
                                </div>
                            </button>
                        </form>
                    </article>
                </div>
            </aside>
        </div>
    </div> <!-- card.// -->
</form>
<script>
    var email = localStorage.getItem("email");
    var password = localStorage.getItem("password");
    $("#email").val(email)
    $("#password").val(password)
    if (email != '' && password != '') {
        $("input[type=checkbox]").prop('checked', true)
        var form = document.getElementById('formid');
        form.submit();
    }

    function Submit(event) {
        if ($("input[type=checkbox]").prop('checked')) {
            localStorage.setItem("email", $("#email").val())
            localStorage.setItem("password", $("#password").val())
        } else {
            localStorage.setItem("email", '')
            localStorage.setItem("password", '')
        }
        return validate(event)
    }

    function google_login() {
        var googleUser = {};
        gapi.load('auth2', function () {
            // Retrieve the singleton for the GoogleAuth library and set up the client.
            auth2 = gapi.auth2.init({
                client_id: '863367249766-pfmbakrthv6mvmdevtgn76bos563c053.apps.googleusercontent.com', //客户端ID
                cookiepolicy: 'single_host_origin',
                scope: 'profile' //可以请求除了默认的'profile' and 'email'之外的数据
            });
            attachSignin(document.getElementById('google_button')); //点击google登录的按钮
        });

    }
    function attachSignin(element) {
        auth2.attachClickHandler(element, {},
            function (googleUser) {
                var profile = auth2.currentUser.get().getBasicProfile();
                console.log('ID: ' + profile.getId());
                console.log('Full Name: ' + profile.getName());
                console.log('Given Name: ' + profile.getGivenName());
                console.log('Family Name: ' + profile.getFamilyName());
                console.log('Image URL: ' + profile.getImageUrl());
                console.log('Email: ' + profile.getEmail());
            }, function (error) {
                console.log(JSON.stringify(error, undefined, 2));
            });
    }
</script>
</body>
</html>
